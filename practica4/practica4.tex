\documentclass[a4paper,11pt]{article}
\usepackage[left=1.5cm,top=2.0cm,right=1.5cm,bottom=2.0cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern,bm}
\usepackage[spanish]{babel}
\usepackage{hyperref}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{braket}
\usepackage{stackrel}
\usepackage{bussproofs}
\usepackage{dsfont}

\title{}
\author{}

\begin{document}

\maketitle 

\thispagestyle{empty}
\begin{center}
\section*{Introducción a  la computación cuántica y fundamentos de lenguajes de programación} 
\subsection*{Ejercicio resuelto de lambda cálculo cuántico.}
\subsubsection*{Joel Catacora}

\end{center}

\newpage{\pagestyle{empty}\cleardoublepage}

\newpage

\section*
{Ejercicio}

Vamos a dar un lambda término de la codificación superdensa, junto con su tipo.

\begin{tabbing}
  $\textsf{Alice}$ \= $=$ \= $\lambda b : \mathds{B}^2. \; \lambda x : S(\mathds{B}^2). 
  \; \Uparrow_r (\textsf{A}_1 \; b \; x)$ \\
  
  \> \> $: \mathds{B}^2 \Rightarrow S(\mathds{B}^2) \Rightarrow S(\mathds{B}^2)$ \\

  $\textsf{A}_1$ \> $= \lambda b : \mathds{B}^2 . \; \lambda x : \mathds{B}^2. \; ( \textsf{A}_2 \; (head \; b) \; (tail \; b) \; (head \; x)) 
  \times (tail \; x)$ \\
  \> \> $: \mathds{B}^2 \Rightarrow \mathds{B}^2 \Rightarrow S(\mathds{B}) \times \mathds{B}$ \\
  
  $\textsf{A}_2$ \> $= \lambda b_1:\mathds{B}. \; \lambda b_2:\mathds{B}. \; \lambda x : \mathds{B}. \;
  \textsf{isZ} \; b_1 ? (\textsf{isZ} \; b_2 ? x : \textsf{not} \; x) : 
  (\textsf{isZ} \; b_2 ? \textsf{Z} \; x : \textsf{Z} (\textsf{not} \; x))$ \\
  \> \> $: \mathds{B} \Rightarrow \mathds{B} \Rightarrow \mathds{B} \Rightarrow S(\mathds{B})$ \\ 

  $\textsf{Bob}$ \> $= \lambda x : S(\mathds{B} \times \mathds{B}). \; \pi_{2} \; (\Uparrow_{r} \textsf{H}_{1} (\textsf{cnot} \; x)) 
  : S(\mathds{B} \times \mathds{B}) \Rightarrow S(\mathds{B} \times \mathds{B})$
\end{tabbing}

El lambda término final es el siguiente:

\begin{tabbing}
  $\textsf{CodSuper} = \lambda b : \mathds{B}^2. \; \textsf{Bob} \; (\textsf{Alice} \; b \; \beta_{00}) 
  : \mathds{B}^2 \Rightarrow \mathds{B}^2$
\end{tabbing}

Consideramos las siguientes definiciones:

\begin{tabbing}
  $\textsf{cnot}$ \= $= \lambda x: \mathds{B} \times \mathds{B}. \; ( head \; x) \times (\textsf{isZ}( head \; x) ?
  (tail \; x) : (\textsf{not} \; (tail \; x)))$ \\

  $\textsf{not}$ \> $= \lambda x: \mathds{B}. \; \textsf{isZ}(x) ? \ket{1} : \ket{0}$ \\

  $\textsf{H}$ \> $= \lambda x : \mathds{B}. \; (\frac{1}{\sqrt{2}}.(\ket{0} + (\textsf{isZ}(x) ? \ket{1} : -\ket{1})))$ \\

  $\textsf{H}_{1}$ \> $= \lambda x : \mathds{B} \times \mathds{B} . \; (\textsf{H} \; (head \; x)) \times (tail \; x)$ \\

  $\textsf{Z}$ \> $= \lambda x : \mathds{B}. \; \textsf{isZ}(x) ? \ket{0} : - \ket{1}$
\end{tabbing}

Daremos la derivación de tipos de $\textsf{A}_2 : \mathds{B} \Rightarrow \mathds{B} \Rightarrow \mathds{B} \Rightarrow S(\mathds{B})$.
Consideramos $\alpha_1 = \textsf{isZ} \; b_2 ? x : \textsf{not} \; x$, y
$\alpha_2 = \textsf{isZ} \; b_2 ? \textsf{Z} \; x : \textsf{Z} (\textsf{not} \; x)$


\begin{prooftree}
  \AxiomC{$$}
  \UnaryInfC{$\Delta \vdash \alpha_1:S(\mathds{B})$}
  \AxiomC{$$}
  \UnaryInfC{$\Delta \vdash \alpha_2:S(\mathds{B})$}
  \RightLabel{\scriptsize{If}}
  \BinaryInfC{$b_2:\mathds{B}, x:\mathds{B} \vdash (\textsf{isZ}() ? \alpha_1 : \alpha_2) : \mathds{B} \Rightarrow S(\mathds{B})$}
  \AxiomC{$$}
  \RightLabel{\scriptsize{Ax}}
  \UnaryInfC{$b_1 : \mathds{B} \vdash b_1 : \mathds{B}$}
  \RightLabel{\scriptsize{$\Rightarrow_E$}}
  \BinaryInfC{$b_1: \mathds{B}, b_2:\mathds{B}, x : \mathds{B} \vdash 
  \textsf{isZ} \; b_1 ? \alpha_1: \alpha_2$}
  \RightLabel{\scriptsize{$\Rightarrow_I$}}
  \UnaryInfC{$b_1: \mathds{B}, b_2:\mathds{B} \vdash \lambda x : \mathds{B}. 
  \; \textsf{isZ} \; b_1 ? \alpha_1: \alpha_2$}
  \RightLabel{\scriptsize{$\Rightarrow_I$}}
  \UnaryInfC{$b_1 : \mathds{B} \vdash \lambda b_2:\mathds{B}. \; \lambda x : \mathds{B}. 
  \; \textsf{isZ} \; b_1 ? \alpha_1: \alpha_2$}
  \RightLabel{\scriptsize{$\Rightarrow_I$}}
  \UnaryInfC{$\vdash \lambda b_1:\mathds{B}. \; \lambda b_2:\mathds{B}. \; \lambda x : \mathds{B}. 
  \; \textsf{isZ} \; b_1 ? \alpha_1: \alpha_2$}
\end{prooftree}

Daremos la derivación de tipos de $\textsf{Alice} : (\mathds{B} \times  \mathds{B}) \times S(\mathds{B} \times \mathds{B}) \Rightarrow S(\mathds{B} \times \mathds{B})$.

\begin{prooftree}
  \AxiomC{$\Gamma \vdash x : (\mathds{B} \times \mathds{B}) \times S( \mathds{B} \times \mathds{B}) $}
  \RightLabel{\scriptsize{$\preceq$}}
  \UnaryInfC{$\Gamma \vdash x : S((\mathds{B} \times \mathds{B}) \times S(\mathds{B} \times \mathds{B})) $}
  \RightLabel{\scriptsize{$\Uparrow_{l}$}}
  \UnaryInfC{$\Gamma \vdash \; \Uparrow_{l}  x : S((\mathds{B} \times \mathds{B}) \times (\mathds{B} \times \mathds{B})) $}
  \AxiomC{$\vdash A : (\mathds{B} \times \mathds{B}) \times (\mathds{B} \times \mathds{B}) \Rightarrow \mathds{B} \times \mathds{B}$}
  \RightLabel{\scriptsize{$\preceq$}}
  \UnaryInfC{$\vdash A : S((\mathds{B} \times \mathds{B}) \times (\mathds{B} \times \mathds{B}) \Rightarrow \mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Rightarrow_{ES}$}}  
  \BinaryInfC{$ x : (\mathds{B} \times \mathds{B}) \times S(\mathds{B} \times \mathds{B}) \vdash A \; (\Uparrow_{l} x) 
    : S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Rightarrow_{I}$}}
  \UnaryInfC{$\vdash \textsf{Alice} : (\mathds{B} \times  \mathds{B}) \times S(\mathds{B} \times \mathds{B}) 
    \Rightarrow S(\mathds{B} \times \mathds{B})$}
\end{prooftree}

Veamos la derivación de $\textsf{Bob} : S(\mathds{B} \times \mathds{B}) \Rightarrow \mathds{B} \times \mathds{B}$.

\begin{prooftree}
  \AxiomC{$\vdash \textsf{H}_{1} : \mathds{B} \times \mathds{B} \Rightarrow S(\mathds{B}) \times \mathds{B} $}
  \RightLabel{\scriptsize{$\preceq$}}
  \UnaryInfC{$\vdash \textsf{H}_{1} : S( (\mathds{B} \times \mathds{B}) \Rightarrow S(\mathds{B}) \times \mathds{B})$}
  \AxiomC{$\textsf{cnot} : \mathds{B} \times \mathds{B} \Rightarrow \mathds{B} \times \mathds{B}$}
  \RightLabel{\scriptsize{$\preceq$}}
  \UnaryInfC{$\vdash \textsf{cnot} : S(\mathds{B} \times \mathds{B} \Rightarrow \mathds{B} \times \mathds{B})$}
  \AxiomC{}
  \RightLabel{\scriptsize{$Ax$}}
  \UnaryInfC{$\Gamma \vdash x : S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Rightarrow_{ES}$}}  
  \BinaryInfC{$\Gamma \vdash \textsf{cnot} \; x : S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Rightarrow_{ES}$}}  
  \BinaryInfC{$\Gamma \vdash \textsf{H}_{1} \; (\textsf{cnot} \; x) : S(S(\mathds{B}) \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Uparrow_{r}$}}
  \UnaryInfC{$\Gamma \vdash \; \Uparrow_{r} \textsf{H}_{1} \; (\textsf{cnot} \; x) : S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$S_{E}$}}
  \UnaryInfC{$x : S(\mathds{B} \times \mathds{B}) \vdash \pi_{2} \; (\Uparrow_{r} \textsf{H}_{1} \; (\textsf{cnot} \; x)) 
    : \mathds{B} \times \mathds{B}$}
  \RightLabel{\scriptsize{$\Rightarrow_{I}$}}
  \UnaryInfC{$\vdash \textsf{Bob} : S(\mathds{B} \times \mathds{B}) \Rightarrow \mathds{B} \times \mathds{B}$}
\end{prooftree}

Por último, tenemos la derivación de tipos de $\textsf{CodSuper} : \mathds{B} \times \mathds{B} \Rightarrow \mathds{B} \times \mathds{B}$.

\begin{prooftree}
  \AxiomC{}
  \RightLabel{\scriptsize{\textsf{Ax}}}
  \UnaryInfC{$\Gamma \vdash x : \mathds{B} \times \mathds{B}$}
  \AxiomC{$\beta_{00} : S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\times_{I}$}}  
  \BinaryInfC{$\Gamma \vdash x \times \beta_{00} : (\mathds{B} \times \mathds{B}) \times S (\mathds{B} \times \mathds{B})$}
  \AxiomC{$\vdash \textsf{Alice} : (\mathds{B} \times \mathds{B}) \times S(\mathds{B} \times \mathds{B})$}
  \noLine
  \UnaryInfC{$\Rightarrow S(\mathds{B} \times \mathds{B})$}
  \RightLabel{\scriptsize{$\Rightarrow_{E}$}}  
  \BinaryInfC{$\Gamma \vdash \textsf{Alice} \; (x \times \beta_{00}) : S(\mathds{B} \times \mathds{B})$}
  \AxiomC {$\vdash \textsf{Bob} : S( \mathds{B} \times \mathds{B})$}
  \noLine
  \UnaryInfC{$\Rightarrow \mathds{B} \times \mathds{B}$}
  \RightLabel{\scriptsize{$\Rightarrow_{E}$}}
  \BinaryInfC{$ x : \mathds{B} \times \mathds{B} \vdash \textsf{Bob} \; (\textsf{Alice} \; (x \times \beta_{00})) 
    : \mathds{B} \times \mathds{B}$}
  \RightLabel{\scriptsize{$\Rightarrow_{I}$}}      
  \UnaryInfC{$\vdash \textsf{CodSuper} : \mathds{B} \times \mathds{B} \Rightarrow \mathds{B} \times \mathds{B}$}
\end{prooftree}

\end{document}
